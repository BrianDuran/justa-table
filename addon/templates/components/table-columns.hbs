<table class="table">
  <thead>
    <tr class={{rowClasses}}>
      {{#each columns as |column|}}
        {{component column.headerComponent column=column}}
      {{/each}}
    </tr>
  </thead>

  <tbody>
    {{! TODO: render diff template instead of this if }}
    {{#if table.collapsableRowGroups}}
      {{#each table.collapsableRowGroups as |rowGroup|}}
        <tr class="collapsable {{if rowGroup.isCollapsed 'is-collapsed'}}" {{action 'toggleRowCollapse' rowGroup}}>
          <td colspan={{columns.length}} class="table-cell">
            {{rowGroup.label}}
          </td>
        </tr>
        {{#each (get table.content rowGroup) as |childRow|}}
          <tr class="{{if rowGroup.isCollapsed 'is-collapsed'}}">
            {{yield row}}
          </tr>
        {{/each}}
      {{/each}}
    {{else}}
      {{#each composableParent.content as |row|}}
        <tr>
          {{yield row}}
        </tr>
      {{/each}}
    {{/if}}
  </tbody>
</table>
